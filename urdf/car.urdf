<?xml version="1.0"?>
<robot name="car" xmlns:xacro="http://ros.org/wiki/xacro">

  <xacro:property name="scale" value="0.001"/>

  <xacro:include filename="$(find simulator)/urdf/car_components.urdf"/>
  
  <link name="chassis">
	<visual>
		<geometry>
			<mesh filename="file://$(find simulator)/meshes/lrt4/chassis/monocoque.stl" scale="${scale} ${scale} ${scale}"/>
		</geometry>
		<origin xyz="0 0 0" rpy="0 0 0"/>
	</visual>
	<visual>
		<geometry>
        	<mesh filename="file://$(find simulator)/meshes/lrt4/chassis/nose.stl" scale="${scale} ${scale} ${scale}"/>
		</geometry>
		<origin xyz="0 0 0" rpy="0 0 0"/>
	</visual>
	<collision>
			<geometry>
        <mesh filename="file://$(find simulator)/meshes/lrt4/chassis/monocoque.stl" scale="${scale} ${scale} ${scale}"/>
			</geometry>
			<origin xyz="0 0 0" rpy="0 0 0"/>
		</collision>
		<inertial> 
			<mass value="190"/>
			<inertia ixx="20" ixy="0" ixz="0" iyy="40" iyz="0.0" izz="150"/>
            <origin xyz="0 0 0" rpy="0 0 0" />
		</inertial>
	</link>

	<xacro:macro name="cylinder_inertia" params="m r h">
    	<inertial>
      		<origin xyz="0 0 0" rpy="${pi/2} 0 0" />
      		<mass value="${m}"/>
      		<inertia ixx="${(m/12) * (3*r*r + h*h)}" ixy = "0" ixz = "0" iyy="${(m/12) * (3*r*r + h*h)}" iyz = "0" izz="${(m/2) * (r*r)}"/>
    	</inertial>
  	</xacro:macro>
 

	<xacro:wheel prefix="drivewhl_rl" x_reflect="-1" y_reflect="1" />
  	<xacro:wheel prefix="drivewhl_rr" x_reflect="-1" y_reflect="-1" />
	<xacro:wheel prefix="drivewhl_fl" x_reflect="1" y_reflect="1" />
  	<xacro:wheel prefix="drivewhl_fr" x_reflect="1" y_reflect="-1" />


	<link name="base_link"/>

	<joint name="base_to_chassis" type="fixed">
		<parent link="base_link"/>
		<child link="chassis"/>
		<origin rpy="0 0 ${pi/2}"/>
	</joint>

  <gazebo reference="base_link">
    <material>Gazebo/Red</material>
  </gazebo>



</robot>
